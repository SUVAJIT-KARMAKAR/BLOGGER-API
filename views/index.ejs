<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('./partials/head.ejs') %>
  <title> BLOGGER | HOME </title>

  <style>
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    .card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
</style>
</head>

<body>
  <!-- Navigation bar  -->
  <%- include('./partials/navbar.ejs') %>

  <!-- Header -->
  <header class="bg-dark text-white text-center py-5">
    <h1 class="display-4">BLOGGER</h1>
    <p class="lead">A platform where users can create, share, and discover amazing blogs.</p>
  </header>

  <!-- Logged in users -->
  <% if (locals.user) { %>
    <!-- If user has blogs, display them -->
    <% if (locals.blogs && locals.blogs.length > 0) { %>
      <div class="container mt-3 mb-3">
        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
            <% blogs.forEach((blog) => { %>
            <div class="col">
                <div class="card h-100 shadow-sm" style="background-color: #f8f9fa;">
                    <img src="<%= blog.coverimageurl %>" class="card-img-top" alt="Blog cover image" style="object-fit: cover; height: 200px;">
                    <div class="card-body">
                        <h5 class="card-title"><%= blog.title %></h5>
                        <p class="card-text">
                            <%= blog.body.length > 150 ? blog.body.substring(0, 150) + '...' : blog.body %>
                        </p>
                        <br />
                        <a href="/blog/<%= blog._id %>" class="btn btn-primary mt-2">Read More</a>
                    </div>
                </div>
            </div>
            <% }) %>
        </div>
    </div>
    <% } else { %>
      <!-- If user is logged in but has no blogs -->
      <div class="d-flex align-items-center" style="height: 100vh;">
        <div class="mx-auto">
          No blogs here yet.
        </div>
      </div>
    <% } %>

  <!-- Not logged in users -->
  <% } else { %>
    <!-- Main content for guests -->
    <div class="container my-5">
      <!-- Small description -->
      <div class="text-center mb-5">
        <p>A blogging platform designed for users to easily create and share their thoughts with the world. Whether you're an aspiring writer or an avid reader, this platform provides everything you need to get started.</p>
      </div>

      <!-- Feature cards (2x2 matrix) -->
      <div class="row row-cols-1 row-cols-md-2 g-4">
        <!-- Feature 1 -->
        <div class="col">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Create Your Own Blog</h5>
              <p class="card-text">Easily create a blog with our user-friendly editor. Customize your content with rich formatting options and publish instantly!</p>
            </div>
          </div>
        </div>
        <!-- Feature 2 -->
        <div class="col">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Engage with the Community</h5>
              <p class="card-text">Read blogs from other users, leave comments, and engage in meaningful discussions on a wide variety of topics.</p>
            </div>
          </div>
        </div>
        <!-- Feature 3 -->
        <div class="col">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Personalized Dashboard</h5>
              <p class="card-text">Get a personalized dashboard that tracks your favorite blogs, shows recommendations, and provides insights into your audience.</p>
            </div>
          </div>
        </div>
        <!-- Feature 4 -->
        <div class="col">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title">Mobile Friendly</h5>
              <p class="card-text">Our platform is fully optimized for mobile devices, allowing you to create and read blogs on the go, anytime, anywhere.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Sign-up button -->
      <div class="text-center mt-5">
        <a href="/user/signup" class="btn btn-primary btn-lg"> Sign Up Now </a>
      </div>
    </div>
  <% } %>

  <!-- Scripts -->
  <%- include('./partials/scripts.ejs') %>
</body>

</html>
